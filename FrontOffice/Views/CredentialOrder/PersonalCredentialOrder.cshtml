@{
    Layout = null;
}
<style>
    .radio-inline {
        margin-top: -22px;
        font-size: 14px
    }

    .ui-widget-content {
        color: #6d6d6d;
    }

    .form-control {
        color: #6d6d6d;
    }

    #CredentialOrderForm {
        min-width: 500px;
    }

    .selected li {
        background-color: red;
    }

    .scroll-div {
        height: 210px;
        overflow: auto;
        border: solid;
    }

    .panel-body {
        padding-left: 0px;
        padding-right: 0px;
    }

    thead tr {
        height: 50px
    }
</style>

<div id="credentialLoad" class="overlay hidden">
    <img class="loader-image non-selectable" src="../../Content/Images/invisible.png" />
</div>
<form ng-controller="CredentialOrderCtrl" style="min-width:700px" ng-init="" id="CredentialOrderForm" name="CredentialOrderForm" role="form" ng-submit="CredentialOrderForm.$valid && saveCredentialOrder()" novalidate class="form-horizontal" labels-required>
    <div id="newCredential_menu" class="menu-bar dialog-menu light-green">
        <ul id="menu" class="dialog-menu">
            <li class="root-menu-item-4 " ng-click="CredentialOrderForm.$setSubmitted();CredentialOrderForm.$valid && saveCredentialOrder();">
                <span id="h-menu-item-4"><img id="h-menu-icon-4" class="submitButton h-menu-icon">Պահպանել</span>
            </li>
            <li class="root-menu-item-5 " onclick="CloseBPDialog('newCredential')">
                <span id="h-menu-item-5"><img id="h-menu-icon-5" class="h-menu-icon cancelButton">Հրաժարվել</span>
            </li>
        </ul>
        <div id="right-menu" style="display:none;">
        </div>
    </div>

    <div style="max-width:550px">
        <errors></errors>
    </div>
    <div class="col-sm-12">
        <a style="color:red">
            {{alert}}
        </a>
    </div>
    <div class="col-sm-12">
        <div class="col-sm-6">
            <div class="form-group">
                <label class="tab_title col-sm-6" for="CredentialType"> Լիազորագրի տեսակ</label>
                <div class="col-sm-6" data-ng-init="getCredentialTypes()">
                    <div class="row">
                        <loading-control scopevariable="credentialTypes"></loading-control>
                        <select ng-model="order.Credential.CredentialType" name="CredentialType" id="CredentialType" ng-change="credentialTypeChange()" class="form-control" required
                                data-ng-options="k as v for (k,v) in credentialTypes" ng-if="k!=1">
                            <option value="" hidden="hidden" style=" margin-left:25px">Ընտրեք տեսակը...</option>
                        </select>
                    </div>
                    <div class="row">
                        <ng-messages ng-if="CredentialOrderForm.$submitted || CredentialOrderForm.CredentialType.$dirty"
                                     for="CredentialOrderForm.CredentialType.$error">
                            <ng-message when="required" class="errors">
                                Լիազորագրի տեսակն ընտրված չէ
                            </ng-message>
                        </ng-messages>
                    </div>
                </div>
            </div>
            <div class=" form-group">
                <label class="tab_title col-sm-6 " for="credentialNumber">Համար</label>
                <div class="col-sm-6">
                    <div class="row">
                        <input type="text" class="form-control tab_title" style="text-align: left;" id="CredentialNumber" name="CredentialNumber" ng-model="order.Credential.CredentialNumber">
                    </div>
                    <div ng-messages="CredentialOrderForm.CredentialNumber.$dirty && CredentialOrderForm.CredentialNumber.$error" class="errors">
                        <ng-messages ng-if="CredentialOrderForm.$submitted || CredentialOrderForm.CredentialNumber.$dirty"
                                     for="CredentialOrderForm.CredentialNumber.$error">
                            <ng-message when="required" class="errors">
                                Համարը նշված չէ
                            </ng-message>
                        </ng-messages>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-6 tab_title">Լիազորված անձ</label>
                <div class="col-sm-6 ">
                    <div class="row">
                        <div class="input-group">
                            <input type="text" ng-disabled="order.Credential.CredentialType==null" ng-model="customerNumber" maxlength="12" style="width:122px" class="form-control" id="customerNumber" name="customerNumber" onkeypress="return event.keyCode != 13;" ng-model-options="{updateOn: 'blur'}" data-update-model-on-enter-key-pressed>
                            <div class="input-group-btn" style="display:inline-block;">
                                <button ng-disabled="order.Credential.CredentialType==null" type="button" title="Ավելացնել լիազորված անձին" class="btn btn-primary" ng-click="addCustomer(customerNumber)"><span class="glyphicon glyphicon-plus"></span></button>
                                <button ng-disabled="order.Credential.CredentialType==null" type="button" title="Հաճախորդի որոնում" class="btn btn-primary searchButton" ng-click="searchCustomers()"><span class="glyphicon glyphicon-search greenStyle"></span></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div ng-if="order.Credential.CredentialType == 0 && !order.Credential.GivenByBank && (order.Credential.AssigneeList[0].OperationGroupList[4].Checked || order.Credential.AssigneeList[0].OperationGroupList[5].Checked)">

                <div class=" form-group">
                    <label ng-if="$root.SessionProperties.CustomerType == 6 || $root.SessionProperties.CustomerType == 2" class="tab_title col-sm-6 " for="CredentialGivenDate">Լիազորագրի վավերացման ամսաթիվ</label>
                    <label ng-if="$root.SessionProperties.CustomerType != 6 && $root.SessionProperties.CustomerType != 2" class="tab_title col-sm-6 " for="CredentialGivenDate">Լիազորագրի տրման ամսաթիվ</label>
                    <div class="col-sm-6">
                        <div class="row">
                            <input type="date" class="form-control tab_title" required style="text-align: left;" id="CredentialGivenDate" name="CredentialGivenDate" ng-model="order.Credential.CredentialGivenDate">
                        </div>
                        <div class="row">
                            <div ng-messages="CredentialOrderForm.CredentialGivenDate.$dirty && CredentialOrderForm.CredentialGivenDate.$error" class="errors">
                                <ng-messages ng-if="CredentialOrderForm.$submitted || CredentialOrderForm.CredentialGivenDate.$dirty" for="CredentialOrderForm.CredentialGivenDate.$error">
                                    <ng-message when="required" class="errors">
                                        Լիազորագրի տրման/վավերացման ամսաթիվը նշված չէ
                                    </ng-message>
                                </ng-messages>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group" ng-if="$root.SessionProperties.CustomerType != 6 && $root.SessionProperties.CustomerType != 2">
                    <label class="tab_title col-sm-6 " for="HasNotarAuthorization">Լիազորագիրը վավերացված է նոտարական կարգով</label>
                    <div class="col-sm-6">
                        <div class="row">
                            <select ng-model="order.Credential.HasNotarAuthorization" ng-init="order.Credential.HasNotarAuthorization = 'false'" required data-toggle="tooltip" data-trigger="hover" data-placement="top" style="width:80px" name="HasNotarAuthorization" id="HasNotarAuthorization" class="form-control">
                                <option value="false">Ոչ</option>
                                <option value="true">Այո</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div ng-if="$root.SessionProperties.CustomerType == 6 || $root.SessionProperties.CustomerType == 2 || order.Credential.HasNotarAuthorization == 'true'">

                    <div class="form-group">
                        <label class="tab_title col-sm-6 control-label" for="NotaryTerritory">Նոտարական տարածք</label>
                        <div class="col-sm-6">
                            <div class="row">
                                <input type="text" required style="text-align:left" class="form-control tab_title" name="NotaryTerritory" id="NotaryTerritory" ng-model="order.Credential.NotaryTerritory">
                                <span>
                                    <ng-messages ng-if="CredentialOrderForm.$submitted" for="CredentialOrderForm.NotaryTerritory.$error || CredentialOrderForm.NotaryTerritory.$dirty">
                                        <ng-message when="required" class="errors">
                                            Նոտարական տարածքը լրացված չէ
                                        </ng-message>
                                    </ng-messages>
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="tab_title col-sm-6 control-label" for="Notary">Նոտար</label>
                        <div class="col-sm-6">
                            <div class="row">
                                <input type="text" required style="text-align:left" class="form-control tab_title" name="Notary" id="Notary" ng-model="order.Credential.Notary">
                                <span>
                                    <ng-messages ng-if="CredentialOrderForm.$submitted" for="CredentialOrderForm.Notary.$error || CredentialOrderForm.Notary.$dirty">
                                        <ng-message when="required" class="errors">
                                            Նոտարը լրացված չէ
                                        </ng-message>
                                    </ng-messages>
                                </span>
                            </div>
                        </div>
                    </div>

                </div>

            </div>

            <div class="col-sm-12">
                <div class="row">
                    <div ng-if="order.Credential.AssigneeList != null && order.Credential.AssigneeList.length != 0">
                        <customerinfo customernumber="order.Credential.AssigneeList[0].CustomerNumber" showfulldata="false"> </customerinfo>
                    </div>
                </div>
            </div>

            <div class=" form-group" ng-show="order.Credential.CredentialType!=2">
                <div class="col-sm-6">
                    <div class="checkbox checkbox-warning">
                        <input type="checkbox" id="AllOperation" value="option2" ng-model="checkAllOperations" ng-change="InitAllOperations()" aria-label="Single checkbox One">
                        <label for="AllOperation">Բոլոր լիազորությունները</label>
                    </div>
                </div>
                <div class="col-sm-6" ng-show="order.Credential.CredentialType==0">
                    <div class="checkbox checkbox-warning">
                        <input type="checkbox" id="GivenByBank" ng-click="getNextCredentialDocumentNumber()" ng-true-value="true" ng-false-value="false" ng-model="order.Credential.GivenByBank" aria-label="Single checkbox One">
                        <label for="GivenByBank">Բանկի կողմից տրվող լիազորագիր</label>
                    </div>
                </div>
            </div>

        </div>

        <div class="col-sm-6">
            <div class=" form-group">
                <label class="tab_title col-sm-6 " for="RegistrationDate">Մուտքագրման ա/թ</label>
                <div class="col-sm-6">
                    <div class="row">
                        <input disabled="disabled" type="date" class="form-control tab_title" style="text-align: left;" id="RegistrationDate" name="RegistrationDate" ng-model="order.OperationDate" required>
                    </div>
                </div>
            </div>
            <div class=" form-group">
                <label class="tab_title col-sm-6 " for="RegistrationDate">Սկիզբ</label>
                <div class="col-sm-6">
                    <div class="row">
                        <input type="date" class="form-control tab_title" style="text-align: left;" id="CredentialStartDate" name="CredentialStartDate" ng-disabled="order.Credential.CredentialType==2" ng-model="order.Credential.StartDate" required>
                    </div>
                    <div class="row">
                        <div ng-messages="CredentialOrderForm.CredentialStartDate.$dirty && CredentialOrderForm.CredentialStartDate.$error" class="errors">
                            <ng-messages ng-if="CredentialOrderForm.$submitted || CredentialOrderForm.CredentialStartDate.$dirty"
                                         for="CredentialOrderForm.CredentialStartDate.$error">
                                <ng-message when="required" class="errors">
                                    Սկիզբը նշված չէ
                                </ng-message>
                            </ng-messages>
                        </div>
                    </div>
                </div>
            </div>
            <div class=" form-group">
                <label class="tab_title col-sm-6 " for="RegistrationDate">Վերջ</label>
                <div class="col-sm-6">
                    <div class="row">
                        <input type="date" class="form-control tab_title" style="text-align: left;" id="CredentialEndDate" name="CredentialEndDate" ng-disabled="order.Credential.CredentialType==2" ng-model="order.Credential.EndDate" ng-required="order.Credential.CredentialType==0">
                    </div>
                    <div class="row">
                        <div ng-messages="CredentialOrderForm.CredentialEndDate.$dirty && CredentialOrderForm.CredentialEndDate.$error" class="errors">
                            <ng-messages ng-if="CredentialOrderForm.$submitted || CredentialOrderForm.CredentialEndDate.$dirty"
                                         for="CredentialOrderForm.CredentialEndDate.$error">
                                <ng-message when="required" class="errors">
                                    Վերջը նշված չէ
                                </ng-message>
                            </ng-messages>
                        </div>
                    </div>
                </div>
            </div>

            <div ng-if="(order.Credential.CredentialType == 0 && !order.Credential.GivenByBank && (order.Credential.AssigneeList[0].OperationGroupList[4].Checked || order.Credential.AssigneeList[0].OperationGroupList[5].Checked)) && ($root.SessionProperties.CustomerType == 6 || $root.SessionProperties.CustomerType == 2 || order.Credential.HasNotarAuthorization == 'true')">

                <div class="form-group">
                    <label class="tab_title col-sm-6" for="LedgerNumber">Սեղանամատյանի համար</label>
                    <div class="col-sm-6">
                        <div class="row">
                            <input type="text" required style="text-align:left" class="form-control tab_title" name="LedgerNumber" id="LedgerNumber" ng-model="order.Credential.LedgerNumber">
                            <span>
                                <ng-messages ng-if="CredentialOrderForm.$submitted" for="CredentialOrderForm.LedgerNumber.$error || CredentialOrderForm.LedgerNumber.$dirty">
                                    <ng-message when="required" class="errors">
                                        Սեղանամատյանի համարը լրացված չէ
                                    </ng-message>
                                </ng-messages>
                            </span>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="tab_title col-sm-6" for="TranslationValidationDate">Թարգմանության վավերացման ամսաթիվ</label>
                    <div class="col-sm-6">
                        <div class="row">
                            <input type="date" class="form-control tab_title" style="text-align: left;" id="TranslationValidationDate" name="TranslationValidationDate" ng-model="order.Credential.TranslationValidationDate">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="tab_title col-sm-6" for="TranslationOfNotaryTerritory">Թարգմանությունը վավերացրած նոտարի Նոտարական տարածք</label>
                    <div class="col-sm-6">
                        <div class="row">
                            <input type="text" style="text-align:left" class="form-control tab_title" name="TranslationOfNotaryTerritory" id="TranslationOfNotaryTerritory" ng-model="order.Credential.TranslationOfNotaryTerritory">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="tab_title col-sm-6" for="TranslationOfNotary">Թարգմանությունը վավերացրած Նոտար</label>
                    <div class="col-sm-6">
                        <div class="row">
                            <input type="text" style="text-align:left" class="form-control tab_title" name="TranslationOfNotary" id="TranslationOfNotary" ng-model="order.Credential.TranslationOfNotary">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="tab_title col-sm-6" for="TranslationValidationLedgerNumber">Թարգմանության վավերացման սեղանամատյանի համար</label>
                    <div class="col-sm-6">
                        <div class="row">
                            <input type="text" style="text-align:left" class="form-control tab_title" name="TranslationValidationLedgerNumber" id="TranslationValidationLedgerNumber" ng-model="order.Credential.TranslationValidationLedgerNumber">
                        </div>
                    </div>
                </div>

            </div>

            @*<div class=" form-group" ng-show="order.Credential.CredentialType!=2">
                    <label class="col-sm-6"></label>
                    <div class="col-sm-6">
                    </div>
                </div>
                <div class=" form-group" ng-show="order.Credential.CredentialType!=2">
                    <label class="col-sm-6"></label>
                    <div class="col-sm-6">
                    </div>
                </div>
                <div class=" form-group" ng-show="order.Credential.CredentialType!=2">
                    <label class="col-sm-6"></label>
                    <div class="col-sm-6">
                    </div>
                </div>*@
        </div>
    </div>

    <div class="form-group" style="margin-right:15px;">
        <div class="container">
            <div class="panel-body col-sm-4">
                <table>
                    <tr>
                        <td>
                            <table>
                                <thead>
                                    <tr class="top">
                                        <th class="col-sm-4" style="text-align:center">Հաճախորդի համար</th>
                                        <th class="col-sm-5" ng-show="(order.Credential.CredentialType==0 || order.Credential.CredentialType==1) && customertype != 6 && customertype != 2" style="text-align:center">Աշխատակից է</th>
                                        <th class="col-sm-3" ng-show="order.Credential.CredentialType==1" style="text-align:center">Կարգ</th>
                                    </tr>
                                </thead>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="scroll-div">
                                <table class="table table-condensed table-hover" style="background-color:white">
                                    <tbody>
                                        <tr style="height: 40px" ng-repeat="assignee in order.Credential.AssigneeList" ng-class="{'selected':$index == selectedRowAssignee}" ng-click="setClickedRowAssignee($index)">
                                            <td class="col-sm-4" style="text-align:center">{{::assignee.CustomerNumber}}</td>
                                            <td class="col-sm-5" ng-show="(order.Credential.CredentialType==0 || order.Credential.CredentialType==1) && customertype != 6 && customertype != 2" style="text-align:center">
                                                <div class="checkbox checkbox-success" style="text-align:center">
                                                    <input type="checkbox" ng-model="assignee.IsEmployee" ng-true-value="1" ng-false-value="0" id="opTypeAllAccount{{opType.OperationType}}" value="option2" aria-label="Single checkbox One">
                                                    <label for="opTypeAllAccount{{assignee.IsEmployee}}"></label>
                                                </div>
                                            </td>
                                            <td class="col-sm-3" ng-show="order.Credential.CredentialType==1" style="text-align:center">
                                                <div data-ng-init="getCredentialTypes()">
                                                    <div class="row" style="padding-right:15px">
                                                        <loading-control scopevariable="SignatureTypes"></loading-control>
                                                        <select ng-model="assignee.SignatureType" name="SignatureType" id="SignatureType" ng-change="" class="form-control"
                                                                data-ng-options="k as v for (k,v) in SignatureTypes">
                                                            <option value="" hidden="hidden" style=" margin-left:25px">Ընտրեք տեսակը...</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>

            <div class="panel-body col-sm-2">
                <table>
                    <tr>
                        <td>
                            <table style="background-color:white">
                                <thead>
                                    <tr class="top">
                                        <th style="text-align:center">Գործողության խումբ</th>
                                    </tr>
                                </thead>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="scroll-div">
                                <table class="table table-condensed table-hover" style="background-color:white;border-color:#A6A6B1">
                                    <tbody>
                                        <tr ng-repeat="opGroup in order.Credential.AssigneeList[selectedRowAssignee].OperationGroupList" ng-class="{'selected':$index == selectedRowAssigneeOpGroup}" ng-click="setClickedRowAssigneeOpGroup($index)">
                                            <td style="text-align:left">
                                                <div class="checkbox checkbox-success" style="text-align:left">
                                                    <input type="checkbox" class="styled" id="opGroupCheck{{opGroup.GroupId}}" ng-model="opGroup.Checked" ng-change="ChangeOpGroup($index)" value="option2" aria-label="Single checkbox One">
                                                    <label>{{opGroup.Description}}</label>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>

            <div class="panel-body col-sm-4">

                <table>
                    <tr>
                        <td>
                            <table>
                                <thead>
                                    <tr class="top">
                                        <th class="col-sm-8" style="text-align:center">Գործողության տեսակ</th>
                                        <th class="col-sm-4" style="text-align:center">Բոլոր հաշիվները</th>
                                    </tr>
                                </thead>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="scroll-div">
                                <table class="table table-condensed table-hover" style="background-color:white">
                                    <tbody>
                                        <tr ng-repeat="opType in order.Credential.AssigneeList[selectedRowAssignee].OperationList" ng-if="opType.GroupId==selectedGroupId" ng-class="{'selected':$index == selectedRowAssigneeOperation}" ng-click="setClickedRowAssigneeOperation($index)">
                                            <td class="col-sm-8" style=" text-align:left; vertical-align:middle">
                                                <div class="checkbox checkbox-success" style="text-align:left">
                                                    <input type="checkbox" ng-model="opType.Checked" ng-change="ChangeOpType($index)" id="opTypeCheck{{opType.OperationType}}" value="option2" aria-label="Single checkbox One">
                                                    <label>{{opType.OperationTypeDescription}}</label>
                                                </div>
                                            </td>
                                            <td class="col-sm-4" style="vertical-align:middle;text-align:center">
                                                <div class="checkbox checkbox-primary">
                                                    <input type="checkbox" ng-model="opType.AllAccounts" ng-change="ChangeAllAccount($index)" ng-disabled="!opType.Checked || opType.OperationType == 16 || opType.OperationType == 17 || !opType.CanChangeAllAccounts" id="opTypeAllAccount{{opType.OperationType}}" value="option2" aria-label="Single checkbox One">
                                                    <label for="opTypeAllAccount{{opType.OperationType}}"></label>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>

            <div class="panel-body col-sm-2">
                <table>
                    <tr>
                        <td>
                            <table>
                                <thead>
                                    <tr class="top">
                                        <th style="text-align:center">Հաշվի համար</th>
                                    </tr>
                                </thead>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="scroll-div">
                                <table class="table table-condensed table-hover" style="background-color:white">
                                    <tbody>
                                        <tr ng-repeat="account in order.Credential.AssigneeList[selectedRowAssignee].OperationList[selectedRowAssigneeOperation].Accounts">
                                            <td style="text-align:center">
                                                <div class="checkbox checkbox-success" style="text-align:left">
                                                    <input type="checkbox" ng-model="account.Checked" class="styled" id="chkAccount{{account.Account.AccountNumber}}" value="option2" aria-label="Single checkbox One">
                                                    <label for="chkAccount{{account.Account.AccountNumber}}">{{account.Account.AccountNumber}} {{account.Account.Currency}}</label>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>

        </div>
    </div>
</form>











