@{
    Layout = null;
}
<div ng-controller="DepositCtrl" data-ng-init="getDeposit(productId);getDepositSource(productId)" id="depositdetails">
    <div id="depositdetails_menu" class="menu-bar dialog-menu light-green details-menu" style="min-width:810px;">
        <ul id="menu" class="dialog-menu">
            <li class="root-menu-item-4 " ng-if="deposit.AllowAmountAddition == true && deposit.ClosingDate==null">
                <span id="h-menu-item-4" onclick="return false;">
                    <img id="h-menu-icon-4" class="h-menu-icon cashInButton">Համալրում
                    <img id="arrow-down" class="arrowButton">
                </span>
                <ul>
                    <li ng-if="$root.SessionProperties.SourceType == 2" id="v-menuItem-4.2" ng-controller="PopUpCtrl" ng-click="params={AccountNumber: deposit.DepositAccount.AccountNumber,checkForDebitAccount:1,checkForReciverAccount:0,checkForFeeAccount:0,orderType:51};openWindowWithTemplate('paymentorder','Կանխիկ մուտք հաշվին','paymentorder')" data-permission-selector="">
                        <span>Կանխիկ մուտք</span>
                    </li>
                    <li ng-if="$root.SessionProperties.SourceType == 2" id="v-menuItem-4.2" ng-controller="PopUpCtrl" ng-click="params={AccountNumber: deposit.DepositAccount.AccountNumber,checkForDebitAccount:1,checkForReciverAccount:0,checkForFeeAccount:0,orderType:95};openWindowWithTemplate('paymentorder','Կանխիկ մուտք հաշվին ռեեստրով','paymentorder')" data-permission-selector="">
                        <span>Կանխիկ մուտք ռեեստրով</span>
                    </li>
                    <li ng-if="$root.SessionProperties.SourceType == 2" ng-class="{'my_disable':disabelButton==true}" id="v-menuItem-4.3" class="last " data-permission-selector="" ng-controller="PopUpCtrl" ng-click="params={checkForDebitAccount:0,checkForReciverAccount:0,checkForFeeAccount:0,orderType:2,forInputCheckbox:true};openWindowWithTemplate('currencyexchangeorder','Փոխարկում','exchangeorder')">
                        <span>Փոխարկում</span>
                    </li>
                    <li id="v-menuItem-4.1" ng-controller="PopUpCtrl" ng-click="params={checkForDebitAccount:0,checkForReciverAccount:0,checkForFeeAccount:0,orderType:1};openWindowWithTemplate('paymentorder','Փոխանցում սեփական հաշիվների միջև','paymentorder')" data-permission-selector="">
                        <span>Փոխանցում հաշիվների միջև</span>
                    </li>
                </ul>
            </li>

            <li class="root-menu-item-5 " ng-show="deposit.DepositType != 10">
                <span id="h-menu-item-5" onclick="return false;">
                    <img id="h-menu-icon-5" class="h-menu-icon applicationButton">Գրաֆիկ
                    <img id="arrow-down" class="arrowButton">
                </span>
                <ul>
                    <li id="v-menuItem-5.1" ng-controller="PopUpCtrl" ng-click="openWindow('/Deposit/DepositRepayment','Ավանդի գրաֆիկ','depositrepayment')" data-permission-selector="">
                        <span>Դիտել</span>
                    </li>
                    <li id="v-menuItem-5.2" ng-click="depositRepaymentsGrafik()" data-permission-selector="">
                        <span>Տպել</span>
                    </li>
                    <li id="v-menuItem-5.2" ng-click="depositRepaymentsDetailedGrafik(1)" data-permission-selector="">
                        <span>Տպել մանրամասն(PDF)</span>
                    </li>
                    <li id="v-menuItem-5.2" ng-click="depositRepaymentsDetailedGrafik(2)" data-permission-selector="">
                        <span>Տպել մանրամասն(Excel)</span>
                    </li>
                </ul>
            </li>


            <li class="root-menu-item-2 " ng-class="{'my_disable':disabelButton==true}" ng-show="deposit.ClosingDate==null && deposit.DepositType != 10" ng-controller="PopUpCtrl" ng-click="params={currentDeposit:deposit}; openWindow('/Deposit/TerminateDepositView','Ավանդի դադարեցում','terminatedeposit',callbackgetDeposit)">
                <span id="h-menu-item-2"><img id="h-menu-icon-2" class="closeAccountButton h-menu-icon">Դադարեցում</span>
            </li>

            <li class="root-menu-item-6 ">
                <span id="h-menu-item-6" onclick="return false;">
                    <img id="h-menu-icon-6" class="h-menu-icon printButton">Փաստաթղթեր
                    <img id="arrow-down" class="arrowButton">
                </span>
                <ul>
                    <li id="v-menuItem-6.1" class="" ng-if="deposit.DepositQuality!=0" ng-click="getDepositContract(deposit.DepositNumber, confirmationPerson)" data-permission-selector="">
                        <span>Ավանդի պայմանագիր</span>
                    </li>
                    <li id="v-menuItem-6.2" class="" ng-if="deposit.DepositQuality==0" ng-click="depositCloseApplication(deposit.DepositNumber);" data-permission-selector="">
                        <span>Դադարեցման դիմում</span>
                    </li>
                </ul>
            </li>

            <li ng-if="deposit.DepositQuality!=0">
                <span id="h-menu-item-5" onclick="return false;">
                    <select title="Ստորագրող անձ" data-toggle="tooltip" data-trigger="hover" data-placement="top" data-ng-model="confirmationPerson" style="max-width:150px;height:30px" name="ConfirmationPerson" id="h-menu-item-5" ng-change="confirmationPersons(confirmationPerson)">
                        <option value="1" ng-show="confirmationPersonsFirstValueVisibility">մասնաճյուղի աշխատակից</option>
                        <option value="2">կառավարիչ</option>
                        <option value="3">կառավարչի տեղակալ</option>
                    </select>
                </span>
            </li>

            <li class="root-menu-item-3 " ng-if="deposit.JointType==1 || deposit.JointType==2" ng-controller="PopUpCtrl" ng-click="params={accountNumber: account.AccountNumber};openWindow('/Account/JointAccountCustomersDetails', 'Հաշվի մասնաբաժիններ', 'JointAccountCustomersDetails');">
                <span id="h-menu-item-3"><img id="h-menu-icon-3" class="sharedAccountsButton h-menu-icon">Մասնաբաժիններ</span>
            </li>

        </ul>
    </div>
    <div class="product-details bhoechie-tab-content" style="min-width:810px;margin-left:10px;">
        <div class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Ավանդի համար</div>
            <div class="product-detail-cell product-detail-value">{{deposit.DepositNumber}}</div>
        </div>
        <div class="product-detail-row" ng-if="deposit.MainDepositNumber!=0">
            <div class="product-detail-cell product-detail-lable">Սկզբնական ավանդի համար</div>
            <div class="product-detail-cell product-detail-value">{{deposit.MainDepositNumber}}</div>
        </div>
        <div class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Ավանդային հաշիվ</div>
            <div class="product-detail-cell product-detail-value">{{deposit.DepositAccount.AccountNumber}} {{deposit.DepositAccount.Currency}}</div>
        </div>

        <div class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Մայր գումարի վճարման հաշիվ</div>
            <div class="product-detail-cell product-detail-value">
                {{deposit.ConnectAccount.AccountNumber}} {{deposit.ConnectAccount.Currency}}
                <span ng-controller="PopUpCtrl" ng-click="params={deposit:deposit,fieldType:1};openWindow('/DepositDataChangeOrder/PersonalDepositDataChangeOrder','Ավանդային տվյալների փոփոխում','depositDataChangeOrder')" title="Խմբագրել" class="glyphicon glyphicon-pencil" style="left: 10pt; color: #337AB7"></span>
            </div>
        </div>

        <div class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Տոկոսագումարի վճարման հաշիվ</div>
            <div class="product-detail-cell product-detail-value">
                {{deposit.ConnectAccountForPercent.AccountNumber}} {{deposit.ConnectAccountForPercent.Currency}}
                <span ng-controller="PopUpCtrl" ng-click="params={deposit:deposit,fieldType:2};openWindow('/DepositDataChangeOrder/PersonalDepositDataChangeOrder','Ավանդային տվյալների փոփոխում','depositDataChangeOrder')" title="Խմբագրել" class="glyphicon glyphicon-pencil" style="left: 10pt; color: #337AB7"></span>
            </div>
        </div>

        <div class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Ավանդի տեսակ</div>
            <div class="product-detail-cell product-detail-value">{{deposit.DepositTypeDescription}}</div>
        </div>
        <div class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Սկզբնական գումար</div>
            <div class="product-detail-cell product-detail-value">{{deposit.StartCapitalString}} {{deposit.Currency}}</div>
        </div>
        <div class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Մնացորդ</div>
            <div class="product-detail-cell product-detail-value" style="font-weight:bold;">{{deposit.BalanceString}} {{deposit.Currency}}<span style="left:4pt; color: #337AB7; cursor:pointer;vertical-align:top;" ng-controller="PopUpCtrl" ng-click="params={accountNumber:deposit.DepositAccount.AccountNumber,accountCurrency:deposit.Currency};openWindowWithTemplate('accountflowdetails','Հաշվի շարժ','accountflowdetails');" class="glyphicon glyphicon-info-sign" /></div>
        </div>
        <div class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Տոկոսադրույք</div>
            <div class="product-detail-cell product-detail-value">{{deposit.InterestRate}}%</div>
        </div>
        <div class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Կուտակված տոկոսագումար</div>
            <div class="product-detail-cell product-detail-value" style="font-weight:bold;">{{deposit.CurrentRateValueString}} {{deposit.Currency}}</div>
        </div>
        <div class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Տոկոսները կուտակված են առ</div>
            <div class="product-detail-cell product-detail-value">{{deposit.DayOfRateCalculation | mydate | date: 'dd/MM/yyyy'}}</div>
        </div>
        <div class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Առ &laquo;{{deposit.DayOfRateCalculation | mydate | date: '01/MM/yyyy'}}&raquo; կուտակված տոկոսագումար</div>
            <div class="product-detail-cell product-detail-value">{{deposit.ProfitOnMonthFirstDayString}} {{deposit.Currency}}</div>
        </div>
        <div class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Բոնուսային տոկոս</div>
            <div class="product-detail-cell product-detail-value">{{deposit.BonusInterestRate}}%</div>
        </div>
        <div class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Դադարեցման տոկոսադրույք</div>
            <div class="product-detail-cell product-detail-value"><span ng-if="deposit.CancelRate!=0">{{deposit.CancelRate}}%</span><span ng-if="deposit.CancelRate==0">-</span></div>
        </div>
        <div class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Դադարեցման տոկոսագումար</div>
            <div class="product-detail-cell product-detail-value">{{deposit.CancelRateValueString}} {{deposit.Currency}}</div>
        </div>
        <div class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Պայմանագրի սկիզբ</div>
            <div class="product-detail-cell product-detail-value">{{deposit.StartDateToString}}</div>
        </div>
        <div class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Պայմանագրի վերջ</div>
            <div class="product-detail-cell product-detail-value">{{deposit.EndDateToString}}</div>
        </div>
        <div class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Քաղվածքի տրամադրման եղանակ</div>
            <div class="product-detail-cell product-detail-value">{{deposit.StatementDeliveryTypeDescription}}</div>
        </div>
        <div class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Ավտոմատ երկարաձգում</div>
            <div class="product-detail-cell product-detail-value">{{deposit.RecontractSign}}</div>
        </div>
        <div class="product-detail-row" ng-if="deposit.DepositQuality==0">
            <div class="product-detail-cell product-detail-lable">Փակման ա/թ</div>
            <div class="product-detail-cell product-detail-value">{{deposit.ClosingDate|mydate|date: 'dd/MM/yyyy'}}</div>
        </div>



        <div class="product-detail-row" ng-if="deposit.DepositQuality==0">
            <div class="product-detail-cell product-detail-lable">Փակման պատճառ</div>
            <div class="product-detail-cell product-detail-value">{{deposit.ClosingReasonTypeDescription==null?'-':deposit.ClosingReasonTypeDescription}}</div>
        </div>
        <div class="product-detail-row" ng-if="deposit.DepositQuality==0">
            <div class="product-detail-cell product-detail-lable">Դադարեցնողի ՊԿ</div>
            <div class="product-detail-cell product-detail-value">{{deposit.ClosingSetNumber==0?'-':deposit.ClosingSetNumber}}</div>
        </div>

        <div ng-if="deposit.DepositAccount.FreezeDate!=null" class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Հաշիվը սառեցված է</div>
            <div class="product-detail-cell product-detail-value">{{deposit.DepositAccount.FreezeDate | mydate | date: 'dd/MM/yyyy'}}</div>
        </div>
        <div ng-if="deposit.DepositAccount.UnUsedAmountDate!=null" class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Սառեցման ա/թ</div>
            <div class="product-detail-cell product-detail-value">{{deposit.DepositAccount.UnUsedAmountDate | mydate | date: 'dd/MM/yyyy'}}</div>
        </div>
        <div ng-if="deposit.DepositAccount.UnUsedAmount>0" class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Սառեցված գումար</div>
            <div class="product-detail-cell product-detail-value" style="font-weight:bold;">{{deposit.DepositAccount.UnUsedAmountString}} {{deposit.Currency}}</div>
        </div>
        <div class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Ներգրավող ՊԿ</div>
            <div class="product-detail-cell product-detail-value">
                {{deposit.InvolvingSetNumber}}
                <span style="color: #337AB7; cursor:pointer;" ng-controller="PopUpCtrl" ng-click="params={setNumber:deposit.InvolvingSetNumber}; openWindow('/Home/UserDetails','Օգտագործողի  տվյալներ','userdetails')" class="glyphicon glyphicon-info-sign"></span>
                <span ng-controller="PopUpCtrl" ng-click="params={deposit:deposit,fieldType:3};openWindow('/DepositDataChangeOrder/PersonalDepositDataChangeOrder','Ավանդային տվյալների փոփոխում','depositDataChangeOrder')" title="Խմբագրել" class="glyphicon glyphicon-pencil" style="left: 10pt; color: #337AB7"></span>
            </div>
        </div>
        <div class="product-detail-row">
            <div class="product-detail-cell product-detail-lable">Սպասարկող ՊԿ</div>
            <div class="product-detail-cell product-detail-value">
                {{deposit.ServicingSetNumber}}
                <span style="color: #337AB7; cursor:pointer;" ng-controller="PopUpCtrl" ng-click="params={setNumber:deposit.ServicingSetNumber}; openWindow('/Home/UserDetails','Օգտագործողի  տվյալներ','userdetails')" class="glyphicon glyphicon-info-sign"></span>
                <span ng-controller="PopUpCtrl" ng-click="params={deposit:deposit,fieldType:4};openWindow('/DepositDataChangeOrder/PersonalDepositDataChangeOrder','Ավանդային տվյալների փոփոխում','depositDataChangeOrder')" title="Խմբագրել" class="glyphicon glyphicon-pencil" style="left: 10pt; color: #337AB7"></span>
            </div>
        </div>
        <div class="product-detail-row" ng-if="SourceDescription">
            <div class="product-detail-cell product-detail-lable">Ձևակերպվել է</div>
            <div class="product-detail-cell product-detail-value">{{SourceDescription}}-ի միջոցով</div>
        </div>
    </div>
    <div class="bhoechie-tab-container" style="max-height:80%;" id="depositDetailsContainer">
        <div class="bhoechie-tab-menu" style="display:inline-block; vertical-align: top;">
            <div class="list-group">
                <div class="list-group-item text-center active">Քաղվածք</div>
                <div class="list-group-item text-center"><span>Կցված փաստաթղթեր</span></div>
                <div class="list-group-item text-center"><span>Սառեցումներ</span></div>
            </div>
        </div>
        <div class="bhoechie-tab" style="width: calc(100% - 140px); display: inline-block;">
            <div class="bhoechie-tab-content active" ng-if="deposit">

                <accountstatement accountnumber="deposit.DepositAccount.AccountNumber" productappid="deposit.ProductId" ></accountstatement>

            </div>
            <div class="bhoechie-tab-content" ng-if="deposit">
                <attachmentdocument productid="deposit.ProductId"></attachmentdocument>
            </div>
            <div class="bhoechie-tab-content">
                <freezehistory accountnumber="deposit.DepositAccount.AccountNumber" accounttype="deposit.DepositAccount.AccountType"></freezehistory>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">

    $("#depositdetails div.bhoechie-tab-menu>div.list-group>div").click(function (e) {
        e.preventDefault();
        $(this).siblings('#depositdetails div.active').removeClass("active");
        $(this).addClass("active");
        var index = $(this).index();
        $("#depositdetails div.bhoechie-tab>div.bhoechie-tab-content").removeClass("active");
        $("#depositdetails div.bhoechie-tab>div.bhoechie-tab-content").eq(index).addClass("active");
    });


    $("#depositDetailsContainer").mCustomScrollbar({
        theme: "rounded-dark",
        scrollButtons: {
            scrollAmount: 200,
            enable: true
        },
        mouseWheel: {
            scrollAmount: 200
        }
    });

</script>