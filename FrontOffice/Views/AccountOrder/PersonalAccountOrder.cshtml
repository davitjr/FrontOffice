@{
    Layout = null;
}
<style type="text/css">
    #accountOrderForm .ui-widget input {
        font-family: 'webly_semibold';
    }
</style>
<div id="accountLoad" class="overlay hidden">
    <img class="loader-image non-selectable" src="../../Content/Images/invisible.png" />
</div>
<form ng-controller="AccountOrderCtrl" name="AccountOrderForm" id="accountOrderForm" role="form" style="min-width:650px;" ng-init="getCustomerType()" novalidate class="form-horizontal" labels-required>
    <div id="newaccount_menu" class="menu-bar dialog-menu light-green">
        <ul id="menu" class="dialog-menu">
            <li class="root-menu-item-4 " ng-click="AccountOrderForm.$setSubmitted();AccountOrderForm.$valid  && saveAccountOrder();">
                <span id="h-menu-item-4"><img id="h-menu-icon-4" class="submitButton h-menu-icon">Պահպանել</span>
            </li>
            <li class="root-menu-item-5 " onclick="CloseBPDialog('newaccount')">
                <span id="h-menu-item-5"><img id="h-menu-icon-5" class="h-menu-icon cancelButton">Հրաժարվել</span>
            </li>
        </ul>
        <div id="right-menu" style="display:none;">
        </div>
    </div>

    <div style="max-width:530px">
        <errors></errors>
    </div>
    <div class="col-sm-12">
        <a style="color:red">
            {{alert}}
        </a>
    </div>

    <div class="col-sm-10">

        <div class="form-group " style=" padding-left:10px" data-ng-init="getAccountOpenWarnings()">
            <div class="col-sm-12" style="max-width:530px">
                <div class="row-no-margin">
                    <section ng-if="warnings.length>0" class=" panel panel-warning">
                        <header class="panel-heading">
                            <span class="panel-title" style="font-size: 14px;"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>&nbsp;Ուշադրություն</span>
                        </header>
                        <div class="panel-body">
                            <div ng-repeat="war in warnings">
                                {{$index+1}}.{{::war}}
                            </div>
                        </div>
                    </section>
                </div>

            </div>
        </div>



        <div class=" form-group">
            <label class="tab_title col-sm-6 " for="RegistrationDate">Մուտքագրման ա/թ</label>
            <div class="col-sm-6 row">
                <div class="multiple_columns col-sm-8 ">
                    <input disabled="disabled" type="date" class="form-control tab_title unstyled" style="text-align: left;" id="RegistrationDate" name="RegistrationDate" ng-model="order.OperationDate" required>
                </div>


            </div>
        </div>

        <div class="form-group">
            <label class="tab_title col-sm-6">Հաշվի սահմանափակման խումբ</label>
            <div class="col-sm-6" data-ng-init="getAccountRestrictionGroups()">
                <div class="row">
                    <loading-control scopevariable="accountRestrictionGroups"></loading-control>
                    <select ng-show="accountRestrictionGroups" data-ng-model="order.RestrictionGroup" ng-change="changeDropdown()" class="form-control " name="RestrictionGroup" id="RestrictionGroup"
                            data-ng-options="k as v for (k,v) in ::accountRestrictionGroups"></select>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="tab_title col-sm-6" for="currency">Արժույթը</label>
            <div class="col-sm-6" data-ng-init="getCurrentAccountCurrencies()">
                <div class="row">
                    <select ng-show="currencies" ng-disabled="order.RestrictionGroup==3" data-ng-model="order.Currency" name="Currency" id="Currency" class="form-control" required
                            data-ng-options="k as v for (k,v) in ::currencies">
                        <option value="" hidden="hidden" style="margin-left:25px">Ընտրեք...</option>
                    </select>
                </div>
                <div class="row">
                    <ng-messages ng-if="AccountOrderForm.$submitted || AccountOrderForm.Currency.$dirty"
                                 for="AccountOrderForm.Currency.$error">
                        <ng-message when="required" class="errors">
                            Արժույթը ընտրված չէ
                        </ng-message>
                    </ng-messages>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label class="tab_title col-sm-6">Պատկանելիություն</label>
            <div class="col-sm-6">
                <div class="row">
                    <select data-ng-model="order.AccountType" ng-disabled="customertype!=6 || order.RestrictionGroup==1 || order.RestrictionGroup==3" ng-change="getCustomerType();" name="AccountType" id="AccountType" class="form-control" required>
                        <option value="" hidden="hidden" style="margin-left:25px">Ընտրեք...</option>
                        <option value="1" style="margin-left:25px">Անհատական</option>
                        <option value="2" style="margin-left:25px">Համատեղ</option>
                        <option value="3" style="margin-left:25px">Հօգուտ երրորդ անձի</option>
                    </select>
                </div>
                <div class="row">
                    <ng-messages ng-if="AccountOrderForm.$submitted || AccountOrderForm.AccountType.$dirty"
                                 for="AccountOrderForm.AccountType.$error">
                        <ng-message when="required" class="errors">
                            Պատկանելիությունը ընտրված չէ
                        </ng-message>
                    </ng-messages>
                </div>

            </div>
        </div>
        <div class="form-group" ng-if="customertype!=6">
            <label class="tab_title col-sm-6">Հաշվի տեսակ</label>
            <div class="col-sm-6" data-ng-init="GetAccountStatuses()">
                <div class="row">
                    <loading-control scopevariable="accountStatuses"></loading-control>
                    <select ng-show="accountStatuses" data-ng-model="order.AccountStatus" ng-disabled="customertype!=6 || order.AccountType==3" class="form-control " name="AccountStatus" id="AccountStatus"
                            data-ng-options="k as v for (k,v) in ::accountStatuses" required>
                        <option class="tab_text" hidden value="">Ընտրեք...</option>
                    </select>
                </div>
                <div class="row">
                    <ng-messages ng-if="AccountOrderForm.$submitted || AccountOrderForm.AccountStatus.$dirty"
                                 for="AccountOrderForm.AccountStatus.$error">
                        <ng-message when="required" class="errors">
                            Հաշվի տեսակը ընտրված չէ
                        </ng-message>
                    </ng-messages>
                </div>

            </div>
        </div>
        <div class="form-group">
            <label class="tab_title col-sm-6">Քաղվածքի ստացման եղանակ</label>
            <div class="col-sm-6" data-ng-init="getStatementDeliveryTypes()">
                <div class="row">
                    <loading-control scopevariable="deliveryTypes"></loading-control>
                    <select ng-show="deliveryTypes" data-ng-model="order.StatementDeliveryType" class="form-control " name="DeliveryType" id="DeliveryType"
                            data-ng-options="k as v for (k,v) in ::deliveryTypes" required>
                        <option class="tab_text" hidden value="">Ընտրեք...</option>
                    </select>
                </div>
                <div class="row">
                    <ng-messages ng-if="AccountOrderForm.$submitted || AccountOrderForm.DeliveryType.$dirty"
                                 for="AccountOrderForm.DeliveryType.$error">
                        <ng-message when="required" class="errors">
                            Քաղվածքի ստացման եղանակը ընտրված չէ
                        </ng-message>
                    </ng-messages>
                </div>

            </div>
        </div>
        <div ng-if="order.RestrictionGroup==1">
            <div class="form-group " style="margin-right:0;">
                <label class="tab_title col-sm-6">Սնանկության գործով կառավարիչ</label>
                <div class="col-sm-6 ">
                    <div class="input-group">

                        <input type="text" ng-model="bankruptcyCustomerNumber" ng-minlength="12" ng-maxlength="12" maxlength="12" class="form-control" id="bankruptcyCustomerNumber" name="bankruptcyCustomerNumber" onkeypress='return event.charCode >= 48 && event.charCode <= 57'
                               data-update-model-on-enter-key-pressed ng-enter="inputBankruptcyManager(bankruptcyCustomerNumber)" ng-disabled="disable" required>
                        <div class="input-group-btn" style="display:block;">
                            <button type="button" class="btn btn-primary" ng-click="inputBankruptcyManager(bankruptcyCustomerNumber)" ng-disabled="disable" title="Ավելացնել Սնանկության գործով կառավարիչ"><span class="glyphicon glyphicon-plus"></span></button>
                            <button type="button" class="btn btn-primary searchButton" ng-click="searchCustomers(true)" ng-disabled="disable" title="Հաճախորդի որոնում"><span class="glyphicon glyphicon-search greenStyle"></span></button>

                        </div>
                    </div>

                </div>
            </div>
            <div class="form-group" ng-if="order.BankruptcyManager.length==12" style="margin-left:15px">

                <div class="row" style="margin-left:10px;">
                    <button type="button" class="btn btn-danger btn-xs" ng-click="deleteBankruptcyManager()"><span class="glyphicon glyphicon-remove"></span></button>
                    <customerinfo customernumber="order.BankruptcyManager" showfulldata="false"> </customerinfo>
                </div>

            </div>
            <div class="form-group">
                <div class="col-sm-6">

                </div>
                <div class="col-sm-6">
                    <div class="row">
                        <ng-messages ng-if="AccountOrderForm.$submitted &&  order.BankruptcyManager.length !=12" class="errors">
                            Սնանկության գործով կառավարիչը մուտքագրված չէ
                        </ng-messages>
                    </div>
                </div>

            </div>

        </div>

        <div ng-if="order.AccountType==2 || order.AccountType==3">
            <div class="form-group " style="margin-right:0;">
                <label class="tab_title col-sm-6" for="jointCustomerNumber">{{order.AccountType==2?"Համատեղ հաշվի հաճախորդ":"Հօգուտ երրորդ անձի հաշվի հաճախորդ"}}</label>
                <div class="col-sm-6 ">
                    <div class="row">
                        <div class="input-group">

                            <input type="text" ng-model="order.jointCustomerNumber" maxlength="12" class="form-control" id="jointCustomerNumber" name="jointCustomerNumber" onkeypress='return event.charCode >= 48 && event.charCode <= 57'
                                   ng-model-options="{updateOn: 'blur'}" data-update-model-on-enter-key-pressed ng-enter="inputJointCustomer(order.jointCustomerNumber)">
                            <div class="input-group-btn" style="display:block;">
                                <button type="button" class="btn btn-primary" ng-click="inputJointCustomer(order.jointCustomerNumber)" title="Ավելացնել համատեղ հաճախորդ"><span class="glyphicon glyphicon-plus"></span></button>
                                <button type="button" class="btn btn-primary searchButton" ng-click="searchCustomers()" title="Համատեղ հաճախորդի որոնում"><span class="glyphicon glyphicon-search greenStyle"></span></button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-6" ng-repeat="customer in order.JointCustomers" ng-if="order.JointCustomers.length!=0">
                    <div class="row" style="margin-left:10px;">
                        <button type="button" class="btn btn-danger btn-xs" ng-click="deleteClickedColumn($index)"><span class="glyphicon glyphicon-remove"></span></button>
                        <customerinfo customernumber="customer.Key" showfulldata="false"> </customerinfo>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-6">

                </div>
                <div class="col-sm-6">
                    <div class="row">
                        <ng-messages ng-if="AccountOrderForm.$submitted && order.JointCustomers.length==0 " class="errors">
                            {{order.AccountType==2?"Համատեղ հաշվի հաճախորդ մուտքագրված չէ":"Հօգուտ երրորդ անձի հաշվի հաճախորդ մուտքագրված չէ"}}

                        </ng-messages>
                    </div>
                </div>

            </div>

        </div>
    </div>

</form>











